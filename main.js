(()=>{"use strict";var t=["ё","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","\\","Del","CapsLock","ф","ы","в","а","п","р","о","л","д","ж","э","Enter","Shift","я","ч","с","м","и","т","ь","б","ю",".","⯅","Shift","Ctrl","Win","Alt","","Alt","⯇","⯆","⯈","Ctrl"],e=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace","Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","Delete","CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter","ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ArrowUp","ShiftRight","ControlLeft","MetaLeft","AltLeft","Space","AltRight","ArrowLeft","ArrowDown","ArrowRight","ControlRight"],n=["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","Del","CapsLock","a","s","d","f","g","h","j","k","l",";","'","Enter","Shift","z","x","c","v","b","n","m",",",".","/","⯅","Shift","Ctrl","Win","Alt","","Alt","⯇","⯆","⯈","Ctrl"],o={Backquote:"~",Digit1:"!",Digit2:"@",Digit3:"#",Digit4:"$",Digit5:"%",Digit6:"^",Digit7:"&",Digit8:"*",Digit9:"(",Digit0:")",Minus:"_",Equal:"+",BracketLeft:"{",BracketRight:"}",Backslash:"|",Semicolon:":",Quote:'"',Comma:"<",Period:">",Slash:"?"},a={Digit1:"!",Digit2:'"',Digit3:"№",Digit4:";",Digit5:"%",Digit6:":",Digit7:"?",Digit8:"*",Digit9:"(",Digit0:")",Minus:"_",Equal:"+",Backslash:"/",Slash:","},i={ArrowLeft:"⯇",ArrowDown:"⯆",ArrowRight:"⯈",ArrowUp:"⯅"};function l(t){t.forEach((function(t){var e=t;e.classList.contains("not-uppercase")||(e.textContent=t.textContent.toUpperCase())}))}function s(t){t.forEach((function(t){t.textContent=t.textContent.toLowerCase()}))}var r=document.querySelector(".body"),c=!1;function b(t){t.forEach((function(t){var e=t;e.classList.contains("button-content-shift")&&("eng"===localStorage.getItem("locale")?e.textContent=o[t.id]:e.textContent=a[t.id])}))}function u(t){c?(s(t),c=!1):(l(t),c=!0)}r.insertAdjacentHTML("afterbegin",'<header class="header">\n    <h1 class="header__caption">RSS Виртуальная клавиатура</h1>\n  </header>\n  <main class="main">\n    <section class="text">\n      <textarea class="textarea"></textarea>\n    </section>\n    <section class="virtual-keyboard">\n      <div class="keyboard">\n        <ul class="keyboard__line">\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button button-content-shift"></li>\n          <li class="keyboard__button button-content-shift"></li>\n          <li class="keyboard__button button-content-shift"></li>\n          <li class="keyboard__button button-content-shift"></li>\n          <li class="keyboard__button button-content-shift"></li>\n          <li class="keyboard__button button-content-shift"></li>\n          <li class="keyboard__button button-content-shift"></li>\n          <li class="keyboard__button button-content-shift"></li>\n          <li class="keyboard__button button-content-shift"></li>\n          <li class="keyboard__button button-content-shift"></li>\n          <li class="keyboard__button button-content-shift"></li>\n          <li class="keyboard__button button-content-shift"></li>\n          <li class="keyboard__button keyboard__button_backspace not-uppercase"></li>\n          <li class="keyboard__button keyboard__button_tab not-uppercase"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button button-content-shift"></li>\n          <li class="keyboard__button button-content-shift"></li>\n          <li class="keyboard__button button-content-shift"></li>\n          <li class="keyboard__button not-uppercase"></li>\n          <li class="keyboard__button keyboard__button_caps not-uppercase"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button button-content-shift"></li>\n          <li class="keyboard__button button-content-shift"></li>\n          <li class="keyboard__button keyboard__button_enter not-uppercase"></li>\n          <li class="keyboard__button keyboard__button_caps not-uppercase"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button"></li>\n          <li class="keyboard__button button-content-shift"></li>\n          <li class="keyboard__button button-content-shift"></li>\n          <li class="keyboard__button button-content-shift"></li>\n          <li class="keyboard__button not-uppercase"></li>\n          <li class="keyboard__button keyboard__button_enter not-uppercase"></li>\n          <li class="keyboard__button not-uppercase"></li>\n          <li class="keyboard__button not-uppercase"></li>\n          <li class="keyboard__button not-uppercase"></li>\n          <li class="keyboard__button keyboard__button_space not-uppercase"></li>\n          <li class="keyboard__button not-uppercase"></li>\n          <li class="keyboard__button not-uppercase"></li>\n          <li class="keyboard__button not-uppercase"></li>\n          <li class="keyboard__button not-uppercase"></li>\n          <li class="keyboard__button not-uppercase"></li>\n        </ul>\n      </div>\n    </section>\n  </main>\n\n  <footer>\n\n  </footer>');var _=document.querySelectorAll(".keyboard__button"),d=document.querySelector(".textarea"),y=!1,k=!1;function f(t,e,n){t.forEach((function(t,o){var a=t;a.textContent=e[o],a.setAttribute("id",n[o])}))}var g=function(){localStorage.getItem("locale")?"ru"===localStorage.getItem("locale")?f(_,t,e):f(_,n,e):(localStorage.setItem("locale","ru"),f(_,t,e))};g();document.addEventListener("keydown",(function(o){return function(o,a){o.forEach((function(o){o.id===a.code&&(o.classList.add("keyboard__button_active"),"Tab"===a.code?(a.preventDefault(),d.textContent+="\t"):"Backspace"===a.code?d.textContent=d.textContent.slice(0,-1):"Enter"===a.code?d.textContent+="\n":"ShiftLeft"===a.code||"ShiftRight"===a.code?(l(_),b(_)):"Control"===a.key&&k||"Alt"===a.key&&y?(a.preventDefault(),function(o,a){"ru"===localStorage.getItem("locale")?(a(o,n,e),localStorage.setItem("locale","eng")):(a(o,t,e),localStorage.setItem("locale","ru"))}(_,f)):"Control"===a.key?(a.preventDefault(),y=!0):"Alt"===a.key?(a.preventDefault(),k=!0):"ArrowUp"===a.key||"ArrowLeft"===a.key||"ArrowDown"===a.key||"ArrowRight"===a.key?d.textContent+=i[a.key]:"Delete"!==a.key&&"CapsLock"!==a.key&&"Meta"!==a.key&&(d.textContent+=a.key))}))}(_,o)})),_.forEach((function(t){t.addEventListener("mouseup",(function(e){t.classList.remove("keyboard__button_active"),"CapsLock"===e.target.id?u(_):"ShiftLeft"!==e.target.id&&"ShiftRight"!==e.target.id||(s(_),g())}))})),_.forEach((function(t){t.addEventListener("mousedown",(function(e){t.classList.add("keyboard__button_active"),"Backspace"===e.target.id?d.textContent=d.textContent.slice(0,-1):"ShiftLeft"===e.target.id||"ShiftRight"===e.target.id?(l(_),b(_)):"Tab"===e.target.id?d.textContent+="\t":"Enter"===e.target.id?d.textContent+="\n":"MetaLeft"===e.target.id?e.preventDefault():"Space"===e.target.id?d.textContent+=" ":"ControlLeft"!==e.target.id&&"AltLeft"!==e.target.id&&"ControlRight"!==e.target.id&&"AltRight"!==e.target.id&&"CapsLock"!==e.target.id&&"Delete"!==e.target.id&&"MetaLeft"!==e.target.id&&(d.textContent+=e.target.innerText)}))})),document.addEventListener("keyup",(function(t){for(var e=0;e<_.length;e+=1)if(_[e].id===t.code){_[e].classList.remove("keyboard__button_active"),"CapsLock"===t.code?u(_):"ShiftLeft"===t.code||"ShiftRight"===t.code?(s(_),g()):"Alt"===t.key?k=!1:"Control"===t.key?y=!1:"Meta"===t.code&&t.preventDefault();break}}))})();